void DoSuccession() {
	// AREA will be defined to the name of the selection area
	// for this inventarisation. If data is set we are doing
	// an inventarisation...
	foreach (Inventaristation inv in 
		EnumerateActiveInventarisations (AREA))
	{
		// The selection of the inventarisation
		Data selection = inv.SelectionMap;
		
		// the data we are analysing...
		Data analyse = progression.GetData ("mydata");
		
		// the resulting dataset
		// value 0 is used for all cells not selected in
		// the AREA map (not selected by user).
		// The area map is used for visualisation.
		// The data map is used for recording the actual values.
		SparseBitMap8 area = new SparseBitMap8 (scene);
		SparseBitMap8 data = new SparseBitMap8 (scene);
		
		int tileCount = 0; // we'll count the number of tiles selected
		foreach (Coordinate vc in selection.EnumerateNotZero ()) 
		{
			tileCount ++;
			int value = analyse.Get (vc);
			
			// somehow map the values of the data we analyse
			// to the result set...
			switch (value) {
				case 0 : area.Set (vc, 1); break;
				case 1 :
				case 2 : area.Set (vc, 2); break;
				default : area.Set (vc, 3); break;
			}
			
			// save the actual data
			data.Set (vc, value);
		}
		
		// Make the report available.
		AddInventarisation (inv.Name, area, data);
		
		// The user has to pay for the number of tiles selected.
		budget -= inv.Cost;
	}
}

void FinalizeSuccession() {
	// destroy the selection area, otherwise we will redo the
	// inventarisation next year!
	scene.progression.DeleteData (AREA);
}

bool CanSelectTile (int x, int y, UserInteraction ui) {
	return true;
}